<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>philsupertramp/game-math: /github/workspace/include/math/symb/Symbolic.h</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">philsupertramp/game-math
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">/github/workspace/include/math/symb/Symbolic.h</div>  </div>
</div><!--header-->
<div class="contents">
<p>Representation of mathematical statement</p>
<div class="fragment"><div class="line"><a name="_a0"></a><a class="code" href="classEquation.html">Equation</a>(<span class="stringliteral">&quot;x + 1&quot;</span>);</div>
<div class="line"><a class="code" href="classEquation.html">Equation</a>(<span class="stringliteral">&quot;x + (1 - y)&quot;</span>);</div>
<div class="line"><a class="code" href="classEquation.html">Equation</a>(<span class="stringliteral">&quot;x + (1 - y)^2&quot;</span>);</div>
<div class="line">...</div>
<div class="ttc" id="aclassEquation_html"><div class="ttname"><a href="classEquation.html">Equation</a></div><div class="ttdef"><b>Definition:</b> Symbolic.h:234</div></div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="preprocessor">#pragma once</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;regex&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum</span> MathNodeType {</div>
<div class="line">    NodeType_Operator    = 0,</div>
<div class="line">    NodeType_Symbolic    = 1,</div>
<div class="line">    NodeType_Numeric     = 2,</div>
<div class="line">    NodeType_Parentheses = 3,</div>
<div class="line">    NodeType_Any         = 4,</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">std::regex GetRegex(MathNodeType type) {</div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> std::regex symbol_regex(<span class="stringliteral">&quot;([-]?[A-Za-z_]{1}[A-Za-z0-9_]*)&quot;</span>);</div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> std::regex number_regex(<span class="stringliteral">&quot;([-]?[0-9]+)&quot;</span>);</div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> std::regex parentheses_regex(<span class="stringliteral">&quot;\\(([\\(\\)+\\-*\\/\\^A-Za-z\\s0-9]*)\\)&quot;</span>);</div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> std::regex operator_regex(<span class="stringliteral">&quot;([\\-+*/\\^]+)&quot;</span>);</div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> std::regex any_regex(<span class="stringliteral">&quot;([\\x00-\\x7F]+)&quot;</span>);</div>
<div class="line">    <span class="keywordflow">switch</span>(type) {</div>
<div class="line">        <span class="keywordflow">case</span> NodeType_Symbolic: <span class="keywordflow">return</span> symbol_regex;</div>
<div class="line">        <span class="keywordflow">case</span> NodeType_Numeric: <span class="keywordflow">return</span> number_regex;</div>
<div class="line">        <span class="keywordflow">case</span> NodeType_Parentheses: <span class="keywordflow">return</span> parentheses_regex;</div>
<div class="line">        <span class="keywordflow">case</span> NodeType_Any: <span class="keywordflow">return</span> any_regex;</div>
<div class="line">        <span class="keywordflow">default</span>: <span class="keywordflow">return</span> operator_regex;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span><a name="_a0"></a><a class="code" href="classMathNode.html">MathNode</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">protected</span>:</div>
<div class="line">    <span class="keywordtype">size_t</span> valSize = 0;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keywordtype">bool</span> isNegative     = <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordtype">bool</span> hasParentheses = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">    MathNodeType type;</div>
<div class="line">    std::shared_ptr&lt;MathNode&gt; left  = <span class="keyword">nullptr</span>;</div>
<div class="line">    std::shared_ptr&lt;MathNode&gt; right = <span class="keyword">nullptr</span>;</div>
<div class="line">    <span class="keywordtype">char</span>* value{};</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">explicit</span> <a class="code" href="classMathNode.html">MathNode</a>(<span class="keyword">const</span> std::string&amp; val) {</div>
<div class="line">        isNegative = val.find(<span class="charliteral">&#39;-&#39;</span>) != std::string::npos &amp;&amp; val.size() &gt; 1;</div>
<div class="line">        value      = <span class="keyword">new</span> <span class="keywordtype">char</span>[val.size() + 1];</div>
<div class="line">        std::copy(val.begin(), val.end(), value);</div>
<div class="line">        value[val.size()] = <span class="charliteral">&#39;\0&#39;</span>; <span class="comment">// don&#39;t forget the terminating 0</span></div>
<div class="line">        valSize           = val.size() + 1;</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="classMathNode.html">MathNode</a>(<span class="keyword">const</span> <a class="code" href="classMathNode.html">MathNode</a>&amp; other) {</div>
<div class="line">        valSize        = other.<a name="a1"></a>valSize;</div>
<div class="line">        isNegative     = other.<a name="a2"></a>isNegative;</div>
<div class="line">        hasParentheses = other.<a name="a3"></a>hasParentheses;</div>
<div class="line">        value          = (<span class="keywordtype">char</span>*)malloc(other.valSize);</div>
<div class="line">        strcpy(value, other.<a name="a4"></a>value);</div>
<div class="line">        left  = other.<a name="a5"></a>left;</div>
<div class="line">        right = other.<a name="a6"></a>right;</div>
<div class="line">        type  = other.<a name="a7"></a>type;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    [[nodiscard]] <span class="keyword">virtual</span> <span class="keywordtype">double</span> Evaluate() <span class="keyword">const</span> = 0;</div>
<div class="line"> </div>
<div class="line">    [[nodiscard]] std::string GetString()<span class="keyword"> const </span>{</div>
<div class="line">        std::stringstream out;</div>
<div class="line">        <span class="keywordflow">if</span>(left != <span class="keyword">nullptr</span>) out &lt;&lt; left;</div>
<div class="line">        out &lt;&lt; value;</div>
<div class="line">        <span class="keywordflow">if</span>(right != <span class="keyword">nullptr</span>) out &lt;&lt; right;</div>
<div class="line">        <span class="keywordflow">return</span> out.str();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">friend</span> std::ostream&amp; operator&lt;&lt;(std::ostream&amp; ostr, <span class="keyword">const</span> <a class="code" href="classMathNode.html">MathNode</a>&amp; other) {</div>
<div class="line">        <span class="keywordflow">if</span>(other.hasParentheses) ostr &lt;&lt; <span class="stringliteral">&quot;(&quot;</span>;</div>
<div class="line">        <span class="keywordflow">if</span>(other.left != <span class="keyword">nullptr</span>) ostr &lt;&lt; other.left;</div>
<div class="line">        ostr &lt;&lt; (other.isNegative ? <span class="stringliteral">&quot;-&quot;</span> : <span class="stringliteral">&quot;&quot;</span>) &lt;&lt; other.value;</div>
<div class="line">        <span class="keywordflow">if</span>(other.right != <span class="keyword">nullptr</span>) ostr &lt;&lt; other.right;</div>
<div class="line">        <span class="keywordflow">if</span>(other.hasParentheses) ostr &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> ostr;</div>
<div class="line">    }</div>
<div class="line">    <span class="keyword">friend</span> std::ostream&amp; operator&lt;&lt;(std::ostream&amp; ostr, <a class="code" href="classMathNode.html">MathNode</a>* other) {</div>
<div class="line">        <span class="keywordflow">if</span>(other-&gt;hasParentheses) ostr &lt;&lt; <span class="stringliteral">&quot;(&quot;</span>;</div>
<div class="line">        <span class="keywordflow">if</span>(other-&gt;left != <span class="keyword">nullptr</span>) ostr &lt;&lt; other-&gt;left;</div>
<div class="line">        ostr &lt;&lt; (other-&gt;isNegative ? <span class="stringliteral">&quot;-&quot;</span> : <span class="stringliteral">&quot;&quot;</span>) &lt;&lt; other-&gt;value;</div>
<div class="line">        <span class="keywordflow">if</span>(other-&gt;right != <span class="keyword">nullptr</span>) ostr &lt;&lt; other-&gt;right;</div>
<div class="line">        <span class="keywordflow">if</span>(other-&gt;hasParentheses) ostr &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> ostr;</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum</span> OperatorPriority {</div>
<div class="line">    OPClassUnknown     = 0,</div>
<div class="line">    OPClassLine        = 1,</div>
<div class="line">    OPClassDot         = 2,</div>
<div class="line">    OPClassParentheses = 3,</div>
<div class="line">};</div>
<div class="line"><span class="keyword">class </span><a name="_a8"></a><a class="code" href="classOperator.html">Operator</a> : <span class="keyword">public</span> <a class="code" href="classMathNode.html">MathNode</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    std::function&lt;double(<span class="keywordtype">double</span>, <span class="keywordtype">double</span>)&gt; op;</div>
<div class="line"> </div>
<div class="line">    OperatorPriority priority;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="classOperator.html">Operator</a>(<span class="keyword">const</span> std::string&amp; name, std::function&lt;<span class="keywordtype">double</span>(<span class="keywordtype">double</span>, <span class="keywordtype">double</span>)&gt; fun, OperatorPriority operatorPriority)</div>
<div class="line">        : <a class="code" href="classMathNode.html">MathNode</a>(name)</div>
<div class="line">        , op(std::move(fun))</div>
<div class="line">        , priority(operatorPriority) {</div>
<div class="line">        type = MathNodeType::NodeType_Operator;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="classOperator.html">Operator</a>(<span class="keyword">const</span> <a class="code" href="classOperator.html">Operator</a>&amp; other)</div>
<div class="line">        : <a class="code" href="classMathNode.html">MathNode</a>(other) {</div>
<div class="line">        op       = other.<a name="a9"></a>op;</div>
<div class="line">        priority = other.<a name="a10"></a>priority;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    [[nodiscard]] <span class="keywordtype">double</span> Evaluate()<span class="keyword"> const override </span>{</div>
<div class="line">        assert(left != <span class="keyword">nullptr</span> &amp;&amp; right != <span class="keyword">nullptr</span>);</div>
<div class="line">        <span class="keywordflow">return</span> op(left-&gt;Evaluate(), right-&gt;Evaluate());</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum</span> OperatorType {</div>
<div class="line">    TYPE_ADDITION          = 0,</div>
<div class="line">    TYPE_SUBTRACTION       = 1,</div>
<div class="line">    TYPE_MULTIPLICATION    = 2,</div>
<div class="line">    TYPE_DIVISION          = 3,</div>
<div class="line">    TYPE_POWER             = 4,</div>
<div class="line">    TYPE_PARENTHESES_OPEN  = 5,</div>
<div class="line">    TYPE_PARENTHESES_CLOSE = 6,</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum</span> OperatorValue : <span class="keywordtype">char</span> {</div>
<div class="line">    VALUE_ADDITION          = <span class="charliteral">&#39;+&#39;</span>,</div>
<div class="line">    VALUE_SUBTRACTION       = <span class="charliteral">&#39;-&#39;</span>,</div>
<div class="line">    VALUE_MULTIPLICATION    = <span class="charliteral">&#39;*&#39;</span>,</div>
<div class="line">    VALUE_DIVISION          = <span class="charliteral">&#39;/&#39;</span>,</div>
<div class="line">    VALUE_POWER             = <span class="charliteral">&#39;^&#39;</span>,</div>
<div class="line">    VALUE_PARENTHESES_OPEN  = <span class="charliteral">&#39;(&#39;</span>,</div>
<div class="line">    VALUE_PARENTHESES_CLOSE = <span class="charliteral">&#39;)&#39;</span>,</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">std::shared_ptr&lt;Operator&gt; GenerateOperator(OperatorType type) {</div>
<div class="line">    <span class="keywordflow">switch</span>(type) {</div>
<div class="line">        <span class="keywordflow">case</span> TYPE_ADDITION:</div>
<div class="line">            <span class="keywordflow">return</span> std::make_shared&lt;Operator&gt;(</div>
<div class="line">            <span class="stringliteral">&quot;+&quot;</span>, [](<span class="keywordtype">double</span> a, <span class="keywordtype">double</span> b) { <span class="keywordflow">return</span> a + b; }, OperatorPriority::OPClassLine);</div>
<div class="line">        <span class="keywordflow">case</span> TYPE_SUBTRACTION:</div>
<div class="line">            <span class="keywordflow">return</span> std::make_shared&lt;Operator&gt;(</div>
<div class="line">            <span class="stringliteral">&quot;-&quot;</span>, [](<span class="keywordtype">double</span> a, <span class="keywordtype">double</span> b) { <span class="keywordflow">return</span> a - b; }, OperatorPriority::OPClassLine);</div>
<div class="line">        <span class="keywordflow">case</span> TYPE_MULTIPLICATION:</div>
<div class="line">            <span class="keywordflow">return</span> std::make_shared&lt;Operator&gt;(</div>
<div class="line">            <span class="stringliteral">&quot;*&quot;</span>, [](<span class="keywordtype">double</span> a, <span class="keywordtype">double</span> b) { <span class="keywordflow">return</span> a * b; }, OperatorPriority::OPClassDot);</div>
<div class="line">        <span class="keywordflow">case</span> TYPE_DIVISION:</div>
<div class="line">            <span class="keywordflow">return</span> std::make_shared&lt;Operator&gt;(</div>
<div class="line">            <span class="stringliteral">&quot;/&quot;</span>, [](<span class="keywordtype">double</span> a, <span class="keywordtype">double</span> b) { <span class="keywordflow">return</span> a / b; }, OperatorPriority::OPClassDot);</div>
<div class="line">        <span class="keywordflow">case</span> TYPE_POWER:</div>
<div class="line">            <span class="keywordflow">return</span> std::make_shared&lt;Operator&gt;(</div>
<div class="line">            <span class="stringliteral">&quot;^&quot;</span>, [](<span class="keywordtype">double</span> a, <span class="keywordtype">double</span> b) { <span class="keywordflow">return</span> pow(a, b); }, OperatorPriority::OPClassDot);</div>
<div class="line">        <span class="keywordflow">case</span> TYPE_PARENTHESES_OPEN:</div>
<div class="line">            <span class="keywordflow">return</span> std::make_shared&lt;Operator&gt;(</div>
<div class="line">            <span class="stringliteral">&quot;(&quot;</span>,</div>
<div class="line">            []([[maybe_unused]] <span class="keywordtype">double</span> a, [[maybe_unused]] <span class="keywordtype">double</span> b) { <span class="keywordflow">return</span> 0.0; },</div>
<div class="line">            OperatorPriority::OPClassParentheses);</div>
<div class="line">        <span class="keywordflow">case</span> TYPE_PARENTHESES_CLOSE:</div>
<div class="line">            <span class="keywordflow">return</span> std::make_shared&lt;Operator&gt;(</div>
<div class="line">            <span class="stringliteral">&quot;)&quot;</span>,</div>
<div class="line">            []([[maybe_unused]] <span class="keywordtype">double</span> a, [[maybe_unused]] <span class="keywordtype">double</span> b) { <span class="keywordflow">return</span> 0.0; },</div>
<div class="line">            OperatorPriority::OPClassParentheses);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> std::make_shared&lt;Operator&gt;(</div>
<div class="line">    <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line">    []([[maybe_unused]] <span class="keywordtype">double</span> a, [[maybe_unused]] <span class="keywordtype">double</span> b) {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Operator not found.\n&quot;</span> &lt;&lt; std::flush;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    },</div>
<div class="line">    OperatorPriority::OPClassUnknown);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span><a name="_a11"></a><a class="code" href="classOperand.html">Operand</a> : <span class="keyword">public</span> <a class="code" href="classMathNode.html">MathNode</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keyword">explicit</span> <a class="code" href="classOperand.html">Operand</a>(<span class="keyword">const</span> std::string&amp; name)</div>
<div class="line">        : <a class="code" href="classMathNode.html">MathNode</a>(name) { }</div>
<div class="line">};</div>
<div class="line"><span class="keyword">class </span><a name="_a12"></a><a class="code" href="classSymbolic.html">Symbolic</a> : <span class="keyword">public</span> <a class="code" href="classOperand.html">Operand</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keywordtype">double</span> evaluationValue = 1.0;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">explicit</span> <a class="code" href="classSymbolic.html">Symbolic</a>(<span class="keyword">const</span> std::string&amp; name)</div>
<div class="line">        : <a class="code" href="classOperand.html">Operand</a>(name) {</div>
<div class="line">        type = MathNodeType::NodeType_Symbolic;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="classSymbolic.html">Symbolic</a>(<span class="keyword">const</span> <a class="code" href="classSymbolic.html">Symbolic</a>&amp; other)</div>
<div class="line">        : <a class="code" href="classOperand.html">Operand</a>(other) { }</div>
<div class="line"> </div>
<div class="line">    [[nodiscard]] <span class="keywordtype">double</span> Evaluate()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> isNegative ? evaluationValue * (-1.0) : evaluationValue; }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span><a name="_a13"></a><a class="code" href="classNumber.html">Number</a> : <span class="keyword">public</span> <a class="code" href="classOperand.html">Operand</a></div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">double</span> numericValue;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keyword">explicit</span> <a class="code" href="classNumber.html">Number</a>(<span class="keyword">const</span> std::string&amp; val)</div>
<div class="line">        : <a class="code" href="classOperand.html">Operand</a>(val) {</div>
<div class="line">        type         = MathNodeType::NodeType_Numeric;</div>
<div class="line">        numericValue = strtod(value, <span class="keyword">nullptr</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    [[nodiscard]] <span class="keywordtype">double</span> Evaluate()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> isNegative ? numericValue * (-1.0) : numericValue; }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span><a class="code" href="classEquation.html">Equation</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    std::vector&lt;std::shared_ptr&lt;Symbolic&gt;&gt; symbols;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    std::shared_ptr&lt;MathNode&gt; baseNode = <span class="keyword">nullptr</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">explicit</span> <a class="code" href="classEquation.html">Equation</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* val) {</div>
<div class="line">        std::string eq(val);</div>
<div class="line">        baseNode = createAST(eq);</div>
<div class="line">    }</div>
<div class="line">    <span class="keyword">explicit</span> <a class="code" href="classEquation.html">Equation</a>(<span class="keyword">const</span> std::string&amp; val) { baseNode = createAST(val); }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> Print() {</div>
<div class="line">        std::cout &lt;&lt; baseNode;</div>
<div class="line">        std::cout &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">template</span>&lt;<span class="keyword">typename</span>... VArgs&gt;</div>
<div class="line">    <span class="keywordtype">double</span> Evaluate(VArgs... args) {</div>
<div class="line">        assert(<span class="keyword">sizeof</span>...(args) == symbols.size());</div>
<div class="line">        <a name="a14"></a><a class="code" href="classEquation.html#a2091c8458c47786a28c02798bdac34da">SetSymbols</a>(0, args...);</div>
<div class="line">        <span class="keywordflow">return</span> baseNode-&gt;Evaluate();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">double</span> Evaluate() { <span class="keywordflow">return</span> baseNode-&gt;Evaluate(); }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">template</span>&lt;<span class="keyword">typename</span>... VArgs&gt;</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code" href="classEquation.html#a2091c8458c47786a28c02798bdac34da">SetSymbols</a>(<span class="keyword">const</span> <span class="keywordtype">int</span>&amp; index, <span class="keywordtype">double</span> val, VArgs... args) {</div>
<div class="line">        symbols[index]-&gt;evaluationValue = val;</div>
<div class="line">        <a class="code" href="classEquation.html#a2091c8458c47786a28c02798bdac34da">SetSymbols</a>(index + 1, args...);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code" href="classEquation.html#a2091c8458c47786a28c02798bdac34da">SetSymbols</a>([[maybe_unused]] <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; index) { }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">bool</span> <a name="a15"></a><a class="code" href="classEquation.html#a7de002b470adb0c5e81324da7dc8355f">HasSymbol</a>(<span class="keyword">const</span> std::shared_ptr&lt;Symbolic&gt;&amp; sym) {</div>
<div class="line">        <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; elem : symbols) {</div>
<div class="line">            <span class="keywordflow">if</span>(elem == sym) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    [[nodiscard]] std::string GetString()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> baseNode-&gt;GetString(); }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a name="a16"></a><a class="code" href="classEquation.html#ab9daa6dd4f1c918d325ae90390503269">PrintTree</a>()<span class="keyword"> const </span>{</div>
<div class="line">        <span class="keywordtype">int</span> level    = 0;</div>
<div class="line">        <span class="keywordtype">size_t</span> depth = 0;</div>
<div class="line">        std::vector&lt;std::string&gt; tree(<a name="a17"></a><a class="code" href="classEquation.html#af24aea49f8fddde7c8ac1157bc99c636">GetDepth</a>(baseNode, depth));</div>
<div class="line">        <a class="code" href="classEquation.html#ab9daa6dd4f1c918d325ae90390503269">PrintTree</a>(baseNode, level, tree);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; line : tree) { std::cout &lt;&lt; line &lt;&lt; std::endl; }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">size_t</span> <a class="code" href="classEquation.html#af24aea49f8fddde7c8ac1157bc99c636">GetDepth</a>(<span class="keyword">const</span> std::shared_ptr&lt;MathNode&gt;&amp; node, <span class="keywordtype">size_t</span>&amp; current_depth)<span class="keyword"> const </span>{</div>
<div class="line">        current_depth++;</div>
<div class="line">        <span class="keyword">auto</span> leftDep  = std::numeric_limits&lt;size_t&gt;::min();</div>
<div class="line">        <span class="keyword">auto</span> rightDep = std::numeric_limits&lt;size_t&gt;::min();</div>
<div class="line">        <span class="keywordflow">if</span>(node-&gt;left) { leftDep = <a class="code" href="classEquation.html#af24aea49f8fddde7c8ac1157bc99c636">GetDepth</a>(node-&gt;left, current_depth); }</div>
<div class="line">        <span class="keywordflow">if</span>(node-&gt;right) { rightDep = <a class="code" href="classEquation.html#af24aea49f8fddde7c8ac1157bc99c636">GetDepth</a>(node-&gt;right, current_depth); }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> std::max(std::max(leftDep, current_depth), rightDep);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> <a class="code" href="classEquation.html#ab9daa6dd4f1c918d325ae90390503269">PrintTree</a>(<span class="keyword">const</span> std::shared_ptr&lt;MathNode&gt;&amp; node, <span class="keywordtype">int</span>&amp; level, std::vector&lt;std::string&gt;&amp; tree)<span class="keyword"> const </span>{</div>
<div class="line">        tree[level] += <span class="stringliteral">&quot;\t&quot;</span>;</div>
<div class="line">        tree[level] += std::string(node-&gt;value);</div>
<div class="line">        <span class="keywordflow">if</span>(node-&gt;left) {</div>
<div class="line">            <a class="code" href="classEquation.html#ab9daa6dd4f1c918d325ae90390503269">PrintTree</a>(node-&gt;left, level, tree);</div>
<div class="line">            tree[level] += <span class="stringliteral">&quot;\t&quot;</span>;</div>
<div class="line">            <a class="code" href="classEquation.html#ab9daa6dd4f1c918d325ae90390503269">PrintTree</a>(node-&gt;right, level, tree);</div>
<div class="line">            tree[level] += <span class="stringliteral">&quot;\t&quot;</span>;</div>
<div class="line">            level += 1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="keyword">static</span> std::shared_ptr&lt;Operator&gt; GetOperator(<span class="keyword">const</span> std::string&amp; valString) {</div>
<div class="line">        <span class="keywordflow">if</span>(valString.empty()) { <span class="keywordflow">return</span> {}; }</div>
<div class="line">        <span class="keywordflow">switch</span>(<span class="keywordtype">int</span>(strip(valString).c_str()[0])) {</div>
<div class="line">            <span class="keywordflow">case</span> int(OperatorValue::VALUE_MULTIPLICATION): return GenerateOperator(OperatorType::TYPE_MULTIPLICATION);</div>
<div class="line">            <span class="keywordflow">case</span> int(OperatorValue::VALUE_DIVISION): return GenerateOperator(OperatorType::TYPE_DIVISION);</div>
<div class="line">            <span class="keywordflow">case</span> int(OperatorValue::VALUE_ADDITION): return GenerateOperator(OperatorType::TYPE_ADDITION);</div>
<div class="line">            <span class="keywordflow">case</span> int(OperatorValue::VALUE_SUBTRACTION): return GenerateOperator(OperatorType::TYPE_SUBTRACTION);</div>
<div class="line">            <span class="keywordflow">case</span> int(OperatorValue::VALUE_POWER): return GenerateOperator(OperatorType::TYPE_POWER);</div>
<div class="line">            <span class="keywordflow">case</span> int(OperatorValue::VALUE_PARENTHESES_OPEN):</div>
<div class="line">                return GenerateOperator(OperatorType::TYPE_PARENTHESES_OPEN);</div>
<div class="line">            <span class="keywordflow">case</span> int(OperatorValue::VALUE_PARENTHESES_CLOSE):</div>
<div class="line">                return GenerateOperator(OperatorType::TYPE_PARENTHESES_CLOSE);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> {};</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    std::shared_ptr&lt;MathNode&gt; createAST(<span class="keyword">const</span> std::string&amp; processString) {</div>
<div class="line">        <span class="keyword">auto</span> regex_end = std::sregex_iterator();</div>
<div class="line">        std::vector&lt;std::string&gt; operatorStack;</div>
<div class="line">        std::vector&lt;std::shared_ptr&lt;MathNode&gt;&gt; operandStack;</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">auto</span> numberRegex    = GetRegex(MathNodeType::NodeType_Numeric);</div>
<div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> isNumber = [numberRegex](<span class="keyword">const</span> std::string&amp; in) {</div>
<div class="line">            std::cmatch m;</div>
<div class="line">            <span class="keywordflow">return</span> std::regex_match(in.c_str(), m, numberRegex);</div>
<div class="line">        };</div>
<div class="line">        <span class="keyword">auto</span> symbolRegex    = GetRegex(MathNodeType::NodeType_Symbolic);</div>
<div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> isSymbol = [symbolRegex](<span class="keyword">const</span> std::string&amp; in) {</div>
<div class="line">            std::cmatch m;</div>
<div class="line">            <span class="keywordflow">return</span> std::regex_match(in.c_str(), m, symbolRegex);</div>
<div class="line">        };</div>
<div class="line">        <span class="keyword">auto</span> operatorRegex    = GetRegex(MathNodeType::NodeType_Operator);</div>
<div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> isOperator = [operatorRegex](<span class="keyword">const</span> std::string&amp; in) {</div>
<div class="line">            std::cmatch m;</div>
<div class="line">            <span class="keywordflow">return</span> std::regex_match(in.c_str(), m, operatorRegex);</div>
<div class="line">        };</div>
<div class="line">        <span class="keyword">auto</span> anyRegex    = GetRegex(MathNodeType::NodeType_Any);</div>
<div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> isAny = [anyRegex](<span class="keyword">const</span> std::string&amp; in) {</div>
<div class="line">            std::cmatch m;</div>
<div class="line">            <span class="keywordflow">return</span> std::regex_match(in.c_str(), m, anyRegex);</div>
<div class="line">        };</div>
<div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> isParenthesesOpen  = [](<span class="keyword">const</span> std::string&amp; in) { <span class="keywordflow">return</span> in.find(<span class="charliteral">&#39;(&#39;</span>) != std::string::npos; };</div>
<div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> isParenthesesClose = [](<span class="keyword">const</span> std::string&amp; in) { <span class="keywordflow">return</span> in.find(<span class="charliteral">&#39;)&#39;</span>) != std::string::npos; };</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">bool</span> prevWasOperator = <span class="keyword">true</span>;</div>
<div class="line">        <span class="keywordtype">bool</span> nextIsNegative  = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; c : split(strip(processString))) {</div>
<div class="line">            <span class="keywordflow">if</span>(isNumber(c)) {</div>
<div class="line">                <span class="keyword">auto</span> sym        = std::make_shared&lt;Number&gt;(c);</div>
<div class="line">                sym-&gt;isNegative = nextIsNegative;</div>
<div class="line">                nextIsNegative  = <span class="keyword">false</span>;</div>
<div class="line">                operandStack.push_back(sym);</div>
<div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(isSymbol(c)) {</div>
<div class="line">                <span class="keyword">auto</span> symbol        = std::make_shared&lt;Symbolic&gt;(c);</div>
<div class="line">                symbol-&gt;isNegative = nextIsNegative;</div>
<div class="line">                nextIsNegative     = <span class="keyword">false</span>;</div>
<div class="line">                operandStack.push_back(symbol);</div>
<div class="line">                <span class="keywordflow">if</span>(!<a class="code" href="classEquation.html#a7de002b470adb0c5e81324da7dc8355f">HasSymbol</a>(symbol)) symbols.push_back(symbol);</div>
<div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(isParenthesesOpen(c)) {</div>
<div class="line">                operatorStack.push_back(c);</div>
<div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(isOperator(c)) {</div>
<div class="line">                <span class="keyword">auto</span> currentOp = GetOperator(c);</div>
<div class="line">                <span class="keywordflow">if</span>(prevWasOperator &amp;&amp; currentOp-&gt;value[0] == <span class="charliteral">&#39;-&#39;</span>) {</div>
<div class="line">                    nextIsNegative = <span class="keyword">true</span>;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    <span class="keywordflow">if</span>(!operatorStack.empty()) {</div>
<div class="line">                        <span class="keyword">auto</span> stackTop = GetOperator(operatorStack[operatorStack.size() - 1]);</div>
<div class="line">                        <span class="keywordflow">while</span>(stackTop != <span class="keyword">nullptr</span> &amp;&amp; stackTop-&gt;priority &gt;= currentOp-&gt;priority</div>
<div class="line">                              &amp;&amp; stackTop-&gt;value[0] != <span class="charliteral">&#39;(&#39;</span>) {</div>
<div class="line">                            operatorStack.pop_back();</div>
<div class="line"> </div>
<div class="line">                            <span class="comment">// inverse order, first right then left</span></div>
<div class="line">                            stackTop-&gt;right = operandStack[operandStack.size() - 1];</div>
<div class="line"> </div>
<div class="line">                            operandStack.pop_back();</div>
<div class="line"> </div>
<div class="line">                            stackTop-&gt;left           = operandStack[operandStack.size() - 1];</div>
<div class="line">                            stackTop-&gt;hasParentheses = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line">                            operandStack.pop_back();</div>
<div class="line"> </div>
<div class="line">                            operandStack.push_back(stackTop);</div>
<div class="line">                            <span class="keywordflow">if</span>(!operatorStack.empty()) {</div>
<div class="line">                                stackTop = GetOperator(operatorStack[operatorStack.size() - 1]);</div>
<div class="line">                            } <span class="keywordflow">else</span> {</div>
<div class="line">                                <span class="keywordflow">break</span>;</div>
<div class="line">                            }</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                    operatorStack.push_back(c);</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(isParenthesesClose(c)) {</div>
<div class="line">                <span class="keyword">auto</span> stackTop = operatorStack[operatorStack.size() - 1];</div>
<div class="line">                <span class="keywordflow">while</span>(!isParenthesesOpen(stackTop)) {</div>
<div class="line">                    <span class="keyword">auto</span> currentOp = GetOperator(stackTop);</div>
<div class="line"> </div>
<div class="line">                    currentOp-&gt;right = operandStack[operandStack.size() - 1];</div>
<div class="line">                    operandStack.pop_back();</div>
<div class="line"> </div>
<div class="line">                    currentOp-&gt;left = operandStack[operandStack.size() - 1];</div>
<div class="line">                    operandStack.pop_back();</div>
<div class="line"> </div>
<div class="line">                    operandStack.push_back(currentOp);</div>
<div class="line">                    <span class="keywordflow">if</span>(operatorStack.size() &gt; 1) {</div>
<div class="line">                        operatorStack.pop_back();</div>
<div class="line"> </div>
<div class="line">                        stackTop = operatorStack[operatorStack.size() - 1];</div>
<div class="line">                    } <span class="keywordflow">else</span></div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">                operatorStack.pop_back();</div>
<div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(isAny(c)) {</div>
<div class="line">                <span class="comment">// ignore</span></div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="comment">// error</span></div>
<div class="line">                std::cerr &lt;&lt; <span class="stringliteral">&quot;Error detecting character &quot;</span> &lt;&lt; c &lt;&lt; std::endl;</div>
<div class="line">                <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line">            }</div>
<div class="line">            prevWasOperator = isOperator(c);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span>(!operatorStack.empty()) {</div>
<div class="line">            <span class="keyword">auto</span> stackTop = operatorStack[operatorStack.size() - 1];</div>
<div class="line">            operatorStack.pop_back();</div>
<div class="line"> </div>
<div class="line">            <span class="keyword">auto</span> currentOp   = GetOperator(stackTop);</div>
<div class="line">            currentOp-&gt;right = operandStack[operandStack.size() - 1];</div>
<div class="line">            operandStack.pop_back();</div>
<div class="line"> </div>
<div class="line">            currentOp-&gt;left = operandStack[operandStack.size() - 1];</div>
<div class="line">            operandStack.pop_back();</div>
<div class="line"> </div>
<div class="line">            operandStack.push_back(currentOp);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> operandStack.front();</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="ttc" id="aclassEquation_html_a2091c8458c47786a28c02798bdac34da"><div class="ttname"><a href="classEquation.html#a2091c8458c47786a28c02798bdac34da">Equation::SetSymbols</a></div><div class="ttdeci">void SetSymbols(const int &amp;index, double val, VArgs... args)</div><div class="ttdef"><b>Definition:</b> Symbolic.h:286</div></div>
<div class="ttc" id="aclassEquation_html_a7de002b470adb0c5e81324da7dc8355f"><div class="ttname"><a href="classEquation.html#a7de002b470adb0c5e81324da7dc8355f">Equation::HasSymbol</a></div><div class="ttdeci">bool HasSymbol(const std::shared_ptr&lt; Symbolic &gt; &amp;sym)</div><div class="ttdef"><b>Definition:</b> Symbolic.h:301</div></div>
<div class="ttc" id="aclassEquation_html_ab9daa6dd4f1c918d325ae90390503269"><div class="ttname"><a href="classEquation.html#ab9daa6dd4f1c918d325ae90390503269">Equation::PrintTree</a></div><div class="ttdeci">void PrintTree() const</div><div class="ttdef"><b>Definition:</b> Symbolic.h:313</div></div>
<div class="ttc" id="aclassEquation_html_af24aea49f8fddde7c8ac1157bc99c636"><div class="ttname"><a href="classEquation.html#af24aea49f8fddde7c8ac1157bc99c636">Equation::GetDepth</a></div><div class="ttdeci">size_t GetDepth(const std::shared_ptr&lt; MathNode &gt; &amp;node, size_t &amp;current_depth) const</div><div class="ttdef"><b>Definition:</b> Symbolic.h:328</div></div>
<div class="ttc" id="aclassMathNode_html"><div class="ttname"><a href="classMathNode.html">MathNode</a></div><div class="ttdef"><b>Definition:</b> Symbolic.h:37</div></div>
<div class="ttc" id="aclassNumber_html"><div class="ttname"><a href="classNumber.html">Number</a></div><div class="ttdef"><b>Definition:</b> Symbolic.h:208</div></div>
<div class="ttc" id="aclassOperand_html"><div class="ttname"><a href="classOperand.html">Operand</a></div><div class="ttdef"><b>Definition:</b> Symbolic.h:186</div></div>
<div class="ttc" id="aclassOperator_html"><div class="ttname"><a href="classOperator.html">Operator</a></div><div class="ttdef"><b>Definition:</b> Symbolic.h:103</div></div>
<div class="ttc" id="aclassSymbolic_html"><div class="ttname"><a href="classSymbolic.html">Symbolic</a></div><div class="ttdef"><b>Definition:</b> Symbolic.h:192</div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>

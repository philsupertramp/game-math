\hypertarget{Equation_8h_source}{}\doxysection{Equation.\+h}
\label{Equation_8h_source}\index{include/math/symb/Equation.h@{include/math/symb/Equation.h}}
\mbox{\hyperlink{Equation_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{7 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{8 }
\DoxyCodeLine{9 }
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <cassert>}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <cmath>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <functional>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <regex>}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include <sstream>}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include <unordered\_set>}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#include <utility>}}
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{preprocessor}{\#include "{}../format.h"{}}}
\DoxyCodeLine{20 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{EquationParser_8h}{EquationParser.h}}"{}}}
\DoxyCodeLine{21 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{MathNode_8h}{MathNode.h}}"{}}}
\DoxyCodeLine{22 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{Operand_8h}{Operand.h}}"{}}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{Operator_8h}{Operator.h}}"{}}}
\DoxyCodeLine{24 }
\DoxyCodeLine{25 }
\DoxyCodeLine{29 \textcolor{keyword}{class }\mbox{\hyperlink{classEquation}{Equation}}}
\DoxyCodeLine{30 \{}
\DoxyCodeLine{31 \textcolor{keyword}{public}:}
\DoxyCodeLine{33     std::vector<std::shared\_ptr<Symbolic>> \mbox{\hyperlink{classEquation_a3322e357ba9e92033eb40eb61e82b2f7}{symbols}};}
\DoxyCodeLine{34 }
\DoxyCodeLine{36     std::shared\_ptr<MathNode> \mbox{\hyperlink{classEquation_af1bd5572e55f920d9be6285874219c6e}{baseNode}} = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{37 }
\DoxyCodeLine{39     \textcolor{keywordtype}{int} \mbox{\hyperlink{classEquation_aa481dd44906c7a8682b043b82d8cc562}{degree}} = 1;}
\DoxyCodeLine{40 }
\DoxyCodeLine{44     \mbox{\hyperlink{classEquation_a68511fc719250ed80f86c50de9136733}{Equation}}() \{ \}}
\DoxyCodeLine{45 }
\DoxyCodeLine{50     \textcolor{keyword}{explicit} \mbox{\hyperlink{classEquation_a35ed8dff1c0ccc38b4290afec957504c}{Equation}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* val) \{}
\DoxyCodeLine{51         std::string eq(val);}
\DoxyCodeLine{52         \mbox{\hyperlink{classEquationParser}{EquationParser}} parser(eq);}
\DoxyCodeLine{53         \mbox{\hyperlink{classEquation_af1bd5572e55f920d9be6285874219c6e}{baseNode}} = parser.\mbox{\hyperlink{classEquationParser_a2c458c39a4259accdf8dec7020b6ba8e}{createAST}}();}
\DoxyCodeLine{54         \mbox{\hyperlink{classEquation_a3322e357ba9e92033eb40eb61e82b2f7}{symbols}}  = parser.\mbox{\hyperlink{classEquationParser_a3b3f6b7c14c08795f64e9106e32cf1c3}{symbols}};}
\DoxyCodeLine{55         \mbox{\hyperlink{classEquation_aa481dd44906c7a8682b043b82d8cc562}{degree}}   = \mbox{\hyperlink{classEquation_afc1f65482396b9a8f0d07affe798fb2e}{GetDegree}}(\mbox{\hyperlink{classEquation_af1bd5572e55f920d9be6285874219c6e}{baseNode}});}
\DoxyCodeLine{56     \}}
\DoxyCodeLine{61     \textcolor{keyword}{explicit} \mbox{\hyperlink{classEquation_a35fa8e029070c8117fd30850fdd4a2ec}{Equation}}(\textcolor{keyword}{const} std::string\& val) \{}
\DoxyCodeLine{62         \mbox{\hyperlink{classEquationParser}{EquationParser}} parser(val);}
\DoxyCodeLine{63         \mbox{\hyperlink{classEquation_af1bd5572e55f920d9be6285874219c6e}{baseNode}} = parser.\mbox{\hyperlink{classEquationParser_a2c458c39a4259accdf8dec7020b6ba8e}{createAST}}();}
\DoxyCodeLine{64         \mbox{\hyperlink{classEquation_a3322e357ba9e92033eb40eb61e82b2f7}{symbols}}  = parser.\mbox{\hyperlink{classEquationParser_a3b3f6b7c14c08795f64e9106e32cf1c3}{symbols}};}
\DoxyCodeLine{65         \mbox{\hyperlink{classEquation_aa481dd44906c7a8682b043b82d8cc562}{degree}}   = \mbox{\hyperlink{classEquation_afc1f65482396b9a8f0d07affe798fb2e}{GetDegree}}(\mbox{\hyperlink{classEquation_af1bd5572e55f920d9be6285874219c6e}{baseNode}});}
\DoxyCodeLine{66     \}}
\DoxyCodeLine{67 }
\DoxyCodeLine{68     \textcolor{keywordtype}{int} \mbox{\hyperlink{classEquation_afc1f65482396b9a8f0d07affe798fb2e}{GetDegree}}(\textcolor{keyword}{const} std::shared\_ptr<MathNode>\& node) \{}
\DoxyCodeLine{69         \textcolor{keywordflow}{if}(node == \textcolor{keyword}{nullptr}) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{70 }
\DoxyCodeLine{71         \textcolor{keywordflow}{if}(node-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefea1c144f8bf59ab742c4408ec393602d02}{NodeType\_Operator}}) \{}
\DoxyCodeLine{72             \textcolor{keywordflow}{if}(node-\/>value[0] == \textcolor{charliteral}{'\string^'} \&\& node-\/>left-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefea1e2b34bb3fd76d1773c0e739ab757f0b}{NodeType\_Symbolic}}) \{ \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int})node-\/>right-\/>Evaluate(); \}}
\DoxyCodeLine{73             \textcolor{keyword}{auto} left  = \mbox{\hyperlink{classEquation_afc1f65482396b9a8f0d07affe798fb2e}{GetDegree}}(node-\/>left);}
\DoxyCodeLine{74             \textcolor{keyword}{auto} right = \mbox{\hyperlink{classEquation_afc1f65482396b9a8f0d07affe798fb2e}{GetDegree}}(node-\/>right);}
\DoxyCodeLine{75             \textcolor{keywordflow}{return} left > right ? left : right;}
\DoxyCodeLine{76         \}}
\DoxyCodeLine{77         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{78     \}}
\DoxyCodeLine{79 }
\DoxyCodeLine{83     \textcolor{keywordtype}{void} \mbox{\hyperlink{classEquation_a97a934b003b26bdf3b5c0c1a8a73cf14}{Print}}(std::ostream\& ostr = std::cout) \{}
\DoxyCodeLine{84         ostr << \mbox{\hyperlink{classEquation_af1bd5572e55f920d9be6285874219c6e}{baseNode}};}
\DoxyCodeLine{85         ostr << std::endl;}
\DoxyCodeLine{86     \}}
\DoxyCodeLine{87 }
\DoxyCodeLine{98     \textcolor{keyword}{template}<\textcolor{keyword}{typename}... VArgs>}
\DoxyCodeLine{99     \textcolor{keywordtype}{double} \mbox{\hyperlink{classEquation_af91f693d12ca7d29c2a375fa8f11cc4a}{operator()}}(VArgs... args) \{}
\DoxyCodeLine{100         assert(\textcolor{keyword}{sizeof}...(args) == \mbox{\hyperlink{classEquation_a3322e357ba9e92033eb40eb61e82b2f7}{symbols}}.size());}
\DoxyCodeLine{101         \mbox{\hyperlink{classEquation_a2091c8458c47786a28c02798bdac34da}{SetSymbols}}(0, args...);}
\DoxyCodeLine{102         \textcolor{keywordflow}{return} \mbox{\hyperlink{classEquation_af1bd5572e55f920d9be6285874219c6e}{baseNode}}-\/>Evaluate();}
\DoxyCodeLine{103     \}}
\DoxyCodeLine{108     \textcolor{keywordtype}{double} \mbox{\hyperlink{classEquation_a0e0b17082557327b17bdda0a485d0394}{operator()}}() \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classEquation_af1bd5572e55f920d9be6285874219c6e}{baseNode}}-\/>Evaluate(); \}}
\DoxyCodeLine{109 }
\DoxyCodeLine{117     \textcolor{keyword}{template}<\textcolor{keyword}{typename}... VArgs>}
\DoxyCodeLine{118     \textcolor{keywordtype}{void} \mbox{\hyperlink{classEquation_a2091c8458c47786a28c02798bdac34da}{SetSymbols}}(\textcolor{keyword}{const} \textcolor{keywordtype}{int}\& index, \textcolor{keywordtype}{double} val, VArgs... args) \{}
\DoxyCodeLine{119         \mbox{\hyperlink{classEquation_a3322e357ba9e92033eb40eb61e82b2f7}{symbols}}[index]-\/>evaluationValue = val;}
\DoxyCodeLine{120         \mbox{\hyperlink{classEquation_a2091c8458c47786a28c02798bdac34da}{SetSymbols}}(index + 1, args...);}
\DoxyCodeLine{121     \}}
\DoxyCodeLine{126     \textcolor{keywordtype}{void} \mbox{\hyperlink{classEquation_a5ab52d2a87a6f7c8999d34b0564e00db}{SetSymbols}}([[maybe\_unused]] \textcolor{keyword}{const} \textcolor{keywordtype}{int}\& index) \{ \}}
\DoxyCodeLine{127 }
\DoxyCodeLine{134     \textcolor{keywordtype}{void} \mbox{\hyperlink{classEquation_a60a4e1509750aff0f41c334dfdad385e}{SetSymbols}}(\textcolor{keyword}{const} std::vector<double>\& values) \{}
\DoxyCodeLine{135         assert(values.size() == \mbox{\hyperlink{classEquation_a3322e357ba9e92033eb40eb61e82b2f7}{symbols}}.size());}
\DoxyCodeLine{136 }
\DoxyCodeLine{137         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t} i = 0; i < \mbox{\hyperlink{classEquation_a3322e357ba9e92033eb40eb61e82b2f7}{symbols}}.size(); ++i) \{ \mbox{\hyperlink{classEquation_a3322e357ba9e92033eb40eb61e82b2f7}{symbols}}[i]-\/>evaluationValue = values[i]; \}}
\DoxyCodeLine{138     \}}
\DoxyCodeLine{139 }
\DoxyCodeLine{144     [[nodiscard]] std::string \mbox{\hyperlink{classEquation_a5e5434dd97f523734bd6dc41db0ea79a}{GetString}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classEquation_af1bd5572e55f920d9be6285874219c6e}{baseNode}}-\/>GetString(); \}}
\DoxyCodeLine{145 }
\DoxyCodeLine{149     \textcolor{keywordtype}{void} \mbox{\hyperlink{classEquation_ab9daa6dd4f1c918d325ae90390503269}{PrintTree}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{150         \textcolor{keywordtype}{size\_t} row   = 0;}
\DoxyCodeLine{151         \textcolor{keywordtype}{size\_t} elems = \mbox{\hyperlink{classEquation_af24aea49f8fddde7c8ac1157bc99c636}{GetDepth}}(\mbox{\hyperlink{classEquation_af1bd5572e55f920d9be6285874219c6e}{baseNode}}, row) + 1;}
\DoxyCodeLine{152         std::vector<std::vector<std::string>> levels(elems, std::vector<std::string>(elems));}
\DoxyCodeLine{153         row        = 0;}
\DoxyCodeLine{154         \textcolor{keywordtype}{size\_t} col = 0;}
\DoxyCodeLine{155         \mbox{\hyperlink{classEquation_aec6826e707dd31368f03c66a3e0746f6}{PrintNode}}(\mbox{\hyperlink{classEquation_af1bd5572e55f920d9be6285874219c6e}{baseNode}}, levels, row, col);}
\DoxyCodeLine{156         std::vector<std::vector<std::string>> realLevels(elems, std::vector<std::string>(elems * 2));}
\DoxyCodeLine{160         \textcolor{keywordtype}{bool} eol = \textcolor{keyword}{false};}
\DoxyCodeLine{161         std::vector<size\_t> padding(elems);}
\DoxyCodeLine{162         \textcolor{keywordtype}{size\_t} index = 0;}
\DoxyCodeLine{163         \textcolor{keywordflow}{for}(\textcolor{keyword}{const} \textcolor{keyword}{auto}\& line : levels) \{}
\DoxyCodeLine{164             \textcolor{keywordflow}{for}(\textcolor{keyword}{const} \textcolor{keyword}{auto}\& elem : line) \{}
\DoxyCodeLine{165                 \textcolor{keywordflow}{if}(elem == \textcolor{stringliteral}{"{}  "{}} || elem.empty()) \{}
\DoxyCodeLine{166                     \textcolor{keywordflow}{if}(eol) \{ padding[index]++; \}}
\DoxyCodeLine{167                     eol = \textcolor{keyword}{true};}
\DoxyCodeLine{168                 \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{169                     padding[index] = 0;}
\DoxyCodeLine{170                 \}}
\DoxyCodeLine{171             \}}
\DoxyCodeLine{172             index++;}
\DoxyCodeLine{173         \}}
\DoxyCodeLine{174 }
\DoxyCodeLine{175         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t} paddIndex = 0; paddIndex < elems; ++paddIndex) \{}
\DoxyCodeLine{176             \textcolor{keywordflow}{for}(index = 0; index < elems + padding[paddIndex]; ++index) \{}
\DoxyCodeLine{177                 \textcolor{keywordflow}{if}(index < padding[paddIndex]) \{}
\DoxyCodeLine{178                     std::cout << \textcolor{stringliteral}{"{}  "{}};}
\DoxyCodeLine{179                 \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{180                     std::cout << levels[paddIndex][index -\/ padding[paddIndex]];}
\DoxyCodeLine{181                 \}}
\DoxyCodeLine{182             \}}
\DoxyCodeLine{183             std::cout << std::endl;}
\DoxyCodeLine{184         \}}
\DoxyCodeLine{185     \}}
\DoxyCodeLine{186 }
\DoxyCodeLine{191     \textcolor{keywordtype}{void} \mbox{\hyperlink{classEquation_aec6826e707dd31368f03c66a3e0746f6}{PrintNode}}(}
\DoxyCodeLine{192     \textcolor{keyword}{const} std::shared\_ptr<MathNode>\& node,}
\DoxyCodeLine{193     std::vector<std::vector<std::string>>\& levels,}
\DoxyCodeLine{194     \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t}\& row,}
\DoxyCodeLine{195     \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t}\& column)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{196         \textcolor{keywordflow}{switch}(node-\/>connectionType) \{}
\DoxyCodeLine{197             \textcolor{keywordflow}{case} NodeConnectionType::ConnectionType\_Dual:}
\DoxyCodeLine{198                 \{}
\DoxyCodeLine{199                     \textcolor{comment}{/*      op}}
\DoxyCodeLine{200 \textcolor{comment}{                     *    /    \(\backslash\)}}
\DoxyCodeLine{201 \textcolor{comment}{                     *  left   right}}
\DoxyCodeLine{202 \textcolor{comment}{                     */}}
\DoxyCodeLine{203                     levels[row][column] += \textcolor{stringliteral}{"{}  "{}};}
\DoxyCodeLine{204                     levels[row][column + 1] += node-\/>value;}
\DoxyCodeLine{205                     levels[row][column + 2] += \textcolor{stringliteral}{"{}  "{}};}
\DoxyCodeLine{206                     levels[row + 1][column] += \textcolor{stringliteral}{"{}  /"{}};}
\DoxyCodeLine{207                     levels[row + 1][column + 2] += \textcolor{stringliteral}{"{}  \(\backslash\)\(\backslash\)"{}};}
\DoxyCodeLine{208                     \textcolor{keyword}{auto} childIndex = row + 2;}
\DoxyCodeLine{209                     levels[childIndex][column + 1] += \textcolor{stringliteral}{"{}  "{}};}
\DoxyCodeLine{210                     \mbox{\hyperlink{classEquation_aec6826e707dd31368f03c66a3e0746f6}{PrintNode}}(node-\/>left, levels, childIndex, column);}
\DoxyCodeLine{211                     \mbox{\hyperlink{classEquation_aec6826e707dd31368f03c66a3e0746f6}{PrintNode}}(node-\/>right, levels, childIndex, column + 2);}
\DoxyCodeLine{212                     levels[childIndex][column + 2] += \textcolor{stringliteral}{"{}  "{}};}
\DoxyCodeLine{213                 \}}
\DoxyCodeLine{214                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{215             \textcolor{keywordflow}{case} NodeConnectionType::ConnectionType\_Left:}
\DoxyCodeLine{216                 \{}
\DoxyCodeLine{217                     \textcolor{comment}{/*      fun}}
\DoxyCodeLine{218 \textcolor{comment}{                     *    /}}
\DoxyCodeLine{219 \textcolor{comment}{                     *  left}}
\DoxyCodeLine{220 \textcolor{comment}{                     */}}
\DoxyCodeLine{221                     levels[row][column] += \textcolor{stringliteral}{"{}  "{}};}
\DoxyCodeLine{222                     levels[row][column + 1] += node-\/>value;}
\DoxyCodeLine{223                     levels[row][column + 2] += \textcolor{stringliteral}{"{}  "{}};}
\DoxyCodeLine{224                     levels[row + 1][column] += \textcolor{stringliteral}{"{}  /"{}};}
\DoxyCodeLine{225                     levels[row + 1][column + 2] += \textcolor{stringliteral}{"{}  "{}};}
\DoxyCodeLine{226                     \textcolor{keyword}{auto} childIndex = row + 2;}
\DoxyCodeLine{227                     levels[childIndex][column + 1] += \textcolor{stringliteral}{"{}  "{}};}
\DoxyCodeLine{228                     levels[childIndex][column + 2] += \textcolor{stringliteral}{"{}  "{}};}
\DoxyCodeLine{229                     \mbox{\hyperlink{classEquation_aec6826e707dd31368f03c66a3e0746f6}{PrintNode}}(node-\/>left, levels, childIndex, column);}
\DoxyCodeLine{230                 \}}
\DoxyCodeLine{231                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{232             \textcolor{keywordflow}{case} NodeConnectionType::ConnectionType\_Right:}
\DoxyCodeLine{233                 \{}
\DoxyCodeLine{234                     \textcolor{comment}{/*      fun}}
\DoxyCodeLine{235 \textcolor{comment}{                     *         \(\backslash\)}}
\DoxyCodeLine{236 \textcolor{comment}{                     *         right}}
\DoxyCodeLine{237 \textcolor{comment}{                     */}}
\DoxyCodeLine{238                     levels[row][column] += \textcolor{stringliteral}{"{}  "{}};}
\DoxyCodeLine{239                     levels[row][column + 1] += node-\/>value;}
\DoxyCodeLine{240                     levels[row][column + 2] += \textcolor{stringliteral}{"{}  "{}};}
\DoxyCodeLine{241                     levels[row + 1][column] += \textcolor{stringliteral}{"{}  "{}};}
\DoxyCodeLine{242                     levels[row + 1][column + 2] += \textcolor{stringliteral}{"{}  \(\backslash\)\(\backslash\)"{}};}
\DoxyCodeLine{243                     \textcolor{keyword}{auto} childIndex = row + 2;}
\DoxyCodeLine{244                     levels[childIndex][column] += \textcolor{stringliteral}{"{}  "{}};}
\DoxyCodeLine{245                     levels[childIndex][column + 1] += \textcolor{stringliteral}{"{}  "{}};}
\DoxyCodeLine{246                     \mbox{\hyperlink{classEquation_aec6826e707dd31368f03c66a3e0746f6}{PrintNode}}(node-\/>right, levels, childIndex, column + 2);}
\DoxyCodeLine{247                     levels[childIndex][column + 2] += \textcolor{stringliteral}{"{}  "{}};}
\DoxyCodeLine{248                 \}}
\DoxyCodeLine{249                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{250             \textcolor{keywordflow}{case} NodeConnectionType::ConnectionType\_None:}
\DoxyCodeLine{251                 \{}
\DoxyCodeLine{252                     \textcolor{comment}{//value}}
\DoxyCodeLine{253                     levels[row][column] += std::string(\textcolor{stringliteral}{"{}  "{}}) + node-\/>value;}
\DoxyCodeLine{254                 \}}
\DoxyCodeLine{255                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{256             \textcolor{keywordflow}{case} NodeConnectionType::ConnectionType\_Unknown:}
\DoxyCodeLine{257             \textcolor{keywordflow}{default}: \textcolor{keywordflow}{break};}
\DoxyCodeLine{258         \}}
\DoxyCodeLine{259     \}}
\DoxyCodeLine{260 }
\DoxyCodeLine{267     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{classEquation_af24aea49f8fddde7c8ac1157bc99c636}{GetDepth}}(\textcolor{keyword}{const} std::shared\_ptr<MathNode>\& node, \textcolor{keywordtype}{size\_t}\& current\_depth)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{268         current\_depth++;}
\DoxyCodeLine{269         \textcolor{keyword}{auto} leftDep  = std::numeric\_limits<size\_t>::min();}
\DoxyCodeLine{270         \textcolor{keyword}{auto} rightDep = std::numeric\_limits<size\_t>::min();}
\DoxyCodeLine{271         \textcolor{keywordflow}{if}(node-\/>left) \{ leftDep = \mbox{\hyperlink{classEquation_af24aea49f8fddde7c8ac1157bc99c636}{GetDepth}}(node-\/>left, current\_depth); \}}
\DoxyCodeLine{272         \textcolor{keywordflow}{if}(node-\/>right) \{ rightDep = \mbox{\hyperlink{classEquation_af24aea49f8fddde7c8ac1157bc99c636}{GetDepth}}(node-\/>right, current\_depth); \}}
\DoxyCodeLine{273 }
\DoxyCodeLine{274         \textcolor{keywordflow}{return} std::max(std::max(leftDep, current\_depth), rightDep);}
\DoxyCodeLine{275     \}}
\DoxyCodeLine{276 }
\DoxyCodeLine{283     \textcolor{keywordtype}{void} \mbox{\hyperlink{classEquation_a96bcd5581bd04a65fea7ba373815e418}{PrintTree}}(\textcolor{keyword}{const} std::shared\_ptr<MathNode>\& node, \textcolor{keywordtype}{int}\& level, std::vector<std::string>\& tree)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{284         tree[level] += \textcolor{stringliteral}{"{}\(\backslash\)t"{}};}
\DoxyCodeLine{285         tree[level] += std::string(node-\/>value);}
\DoxyCodeLine{286         \textcolor{keywordflow}{if}(node-\/>left) \{}
\DoxyCodeLine{287             \mbox{\hyperlink{classEquation_ab9daa6dd4f1c918d325ae90390503269}{PrintTree}}(node-\/>left, level, tree);}
\DoxyCodeLine{288             tree[level] += \textcolor{stringliteral}{"{}\(\backslash\)t"{}};}
\DoxyCodeLine{289             \mbox{\hyperlink{classEquation_ab9daa6dd4f1c918d325ae90390503269}{PrintTree}}(node-\/>right, level, tree);}
\DoxyCodeLine{290             tree[level] += \textcolor{stringliteral}{"{}\(\backslash\)t"{}};}
\DoxyCodeLine{291             level += 1;}
\DoxyCodeLine{292         \}}
\DoxyCodeLine{293     \}}
\DoxyCodeLine{294 }
\DoxyCodeLine{305     \textcolor{keyword}{static} \mbox{\hyperlink{classEquation}{Equation}} \mbox{\hyperlink{classEquation_a9d6bd2cd4533aee69ef03cc494f61d94}{Chain}}(\textcolor{keyword}{const} \mbox{\hyperlink{classEquation}{Equation}}\& left, \textcolor{keyword}{const} \mbox{\hyperlink{classEquation}{Equation}}\& right, \textcolor{keyword}{const} std::shared\_ptr<Operator>\& op) \{}
\DoxyCodeLine{306         \mbox{\hyperlink{classEquation}{Equation}} out;}
\DoxyCodeLine{307         op-\/>left     = left.\mbox{\hyperlink{classEquation_af1bd5572e55f920d9be6285874219c6e}{baseNode}};}
\DoxyCodeLine{308         op-\/>right    = right.\mbox{\hyperlink{classEquation_af1bd5572e55f920d9be6285874219c6e}{baseNode}};}
\DoxyCodeLine{309         out.\mbox{\hyperlink{classEquation_af1bd5572e55f920d9be6285874219c6e}{baseNode}} = op;}
\DoxyCodeLine{310         out.\mbox{\hyperlink{classEquation_a3322e357ba9e92033eb40eb61e82b2f7}{symbols}}  = \mbox{\hyperlink{classEquationParser_aaba95e2a39823d660e3b533d07843971}{EquationParser::buildSymbolSuperSet}}(left.\mbox{\hyperlink{classEquation_a3322e357ba9e92033eb40eb61e82b2f7}{symbols}}, right.\mbox{\hyperlink{classEquation_a3322e357ba9e92033eb40eb61e82b2f7}{symbols}});}
\DoxyCodeLine{311         \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{312     \}}
\DoxyCodeLine{313 }
\DoxyCodeLine{317     \textcolor{keywordtype}{void} \mbox{\hyperlink{classEquation_a0b6d13c55c719fec5f2b2995ced8fa35}{Simplify}}() \{}
\DoxyCodeLine{318         \textcolor{comment}{// Early exit for constants}}
\DoxyCodeLine{319         \textcolor{keywordflow}{switch}(\mbox{\hyperlink{classEquation_af1bd5572e55f920d9be6285874219c6e}{baseNode}}-\/>type) \{}
\DoxyCodeLine{320             \textcolor{keywordflow}{case} \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefea1e2b34bb3fd76d1773c0e739ab757f0b}{NodeType\_Symbolic}}:}
\DoxyCodeLine{321             \textcolor{keywordflow}{case} \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefead04e2797598b259ea0d4a18142932f96}{NodeType\_Numeric}}:}
\DoxyCodeLine{322             \textcolor{keywordflow}{case} \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefea7a7d2ae2bbe12c843e2f13bf17233afe}{NodeType\_DefaultSymbol}}:}
\DoxyCodeLine{323             \textcolor{keywordflow}{case} \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefea33343182081eb115cca4d5655d15fe4d}{NodeType\_Any}}: \textcolor{keywordflow}{break};}
\DoxyCodeLine{324             \textcolor{keywordflow}{case} \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefea1c144f8bf59ab742c4408ec393602d02}{NodeType\_Operator}}:}
\DoxyCodeLine{325             \textcolor{keywordflow}{case} \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefeabb22938ecb03779ebe89024bb122529a}{NodeType\_Parentheses}}:}
\DoxyCodeLine{326             \textcolor{keywordflow}{case} \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefea521488c28905dded8d5866bbb41852df}{NodeType\_Functional}}: \mbox{\hyperlink{classEquation_af1bd5572e55f920d9be6285874219c6e}{baseNode}} = \mbox{\hyperlink{classEquation_a276161ffaa1e7610cc0a849fa1704af3}{SimplifyTree}}(\mbox{\hyperlink{classEquation_af1bd5572e55f920d9be6285874219c6e}{baseNode}});}
\DoxyCodeLine{327             \textcolor{keywordflow}{case} \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefeaa395cc2e4df7237a8e4cf83b2c175a59}{NodeType\_Operator\_or\_Parentheses}}: \textcolor{keywordflow}{break};}
\DoxyCodeLine{328         \}}
\DoxyCodeLine{329     \}}
\DoxyCodeLine{330 }
\DoxyCodeLine{331 \textcolor{keyword}{private}:}
\DoxyCodeLine{337     [[nodiscard]] std::shared\_ptr<MathNode> \mbox{\hyperlink{classEquation_a276161ffaa1e7610cc0a849fa1704af3}{SimplifyTree}}(\textcolor{keyword}{const} std::shared\_ptr<MathNode>\& node)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{338         \textcolor{keyword}{auto} out = node;}
\DoxyCodeLine{339         \textcolor{keywordflow}{if}(}
\DoxyCodeLine{340         out-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefead04e2797598b259ea0d4a18142932f96}{NodeType\_Numeric}} || out-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefea1c144f8bf59ab742c4408ec393602d02}{NodeType\_Operator}} || out-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefea7a7d2ae2bbe12c843e2f13bf17233afe}{NodeType\_DefaultSymbol}}}
\DoxyCodeLine{341         || out-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefea1e2b34bb3fd76d1773c0e739ab757f0b}{NodeType\_Symbolic}} || out-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefea521488c28905dded8d5866bbb41852df}{NodeType\_Functional}}) \{}
\DoxyCodeLine{342             out = \mbox{\hyperlink{classEquation_a6c8ce3066345c865668b9133985db652}{simplifyOP}}(out);}
\DoxyCodeLine{343         \}}
\DoxyCodeLine{344 }
\DoxyCodeLine{345         \textcolor{comment}{// early exit}}
\DoxyCodeLine{346         \textcolor{keywordflow}{if}(out-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefead04e2797598b259ea0d4a18142932f96}{NodeType\_Numeric}} || out-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefea1e2b34bb3fd76d1773c0e739ab757f0b}{NodeType\_Symbolic}}) \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{347 }
\DoxyCodeLine{348         \textcolor{keywordflow}{if}(out-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefea1c144f8bf59ab742c4408ec393602d02}{NodeType\_Operator}}) \{}
\DoxyCodeLine{349             \textcolor{keyword}{auto} op = \mbox{\hyperlink{classEquationParser_a97f64a66f0f748f419bc432d1ca94f52}{EquationParser::GetOperator}}(out-\/>value);}
\DoxyCodeLine{350             \textcolor{comment}{// resolve line operators +/-\/}}
\DoxyCodeLine{351             \textcolor{keywordflow}{if}(op-\/>priority == \mbox{\hyperlink{Operator_8h_a46dd797d9c42218918ba2a83eb5b8db7a14a7e4e3f29c74875a1560a628f7e560}{OPClassLine}} || op-\/>priority == \mbox{\hyperlink{Operator_8h_a46dd797d9c42218918ba2a83eb5b8db7ad2cb6f029c9332ded1b1359c5021aea5}{OPClassDot}}) \{ \mbox{\hyperlink{classEquation_a97a7ed33a1b30e31257b1663610f303b}{resolveOP}}(out, op); \}}
\DoxyCodeLine{352         \}}
\DoxyCodeLine{353         \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{354     \}}
\DoxyCodeLine{355 }
\DoxyCodeLine{356 }
\DoxyCodeLine{362     \textcolor{keywordtype}{void} \mbox{\hyperlink{classEquation_a97a7ed33a1b30e31257b1663610f303b}{resolveOP}}(std::shared\_ptr<MathNode>\& out, \textcolor{keyword}{const} std::shared\_ptr<Operator>\& op)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{363         \textcolor{comment}{// left value is numeric. Search for left side of right operand}}
\DoxyCodeLine{364         \textcolor{keywordflow}{if}(out-\/>left-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefead04e2797598b259ea0d4a18142932f96}{NodeType\_Numeric}}) \{}
\DoxyCodeLine{365             \textcolor{keyword}{auto} rightNode = out-\/>right;}
\DoxyCodeLine{366             \textcolor{keywordflow}{while}(rightNode != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{367                 \textcolor{keywordflow}{if}(rightNode-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefead04e2797598b259ea0d4a18142932f96}{NodeType\_Numeric}}) \{}
\DoxyCodeLine{368                     out = \mbox{\hyperlink{classEquation_ae78ab4977e573e352f444a52142d4800}{ApplyOperator}}(rightNode, op, out-\/>left-\/>Evaluate(), \textcolor{keyword}{true});}
\DoxyCodeLine{369                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{370                 \}}
\DoxyCodeLine{371                 rightNode = rightNode-\/>left;}
\DoxyCodeLine{372             \}}
\DoxyCodeLine{373         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(out-\/>right-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefead04e2797598b259ea0d4a18142932f96}{NodeType\_Numeric}}) \{}
\DoxyCodeLine{374             \textcolor{keywordflow}{if}(\mbox{\hyperlink{classEquationParser_a97f64a66f0f748f419bc432d1ca94f52}{EquationParser::GetOperator}}(out-\/>value)-\/>priority != OperatorPriority::OPClassLine) \{ \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{375             \textcolor{keyword}{auto} leftNode = out-\/>left;}
\DoxyCodeLine{376             \textcolor{keyword}{auto} parent   = out;}
\DoxyCodeLine{377             \textcolor{keywordflow}{while}(leftNode != \textcolor{keyword}{nullptr}) \{}
\DoxyCodeLine{378                 \textcolor{keywordflow}{if}(leftNode-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefead04e2797598b259ea0d4a18142932f96}{NodeType\_Numeric}}) \{}
\DoxyCodeLine{379                     parent-\/>right = \mbox{\hyperlink{classEquation_ae78ab4977e573e352f444a52142d4800}{ApplyOperator}}(leftNode, op, out-\/>right-\/>Evaluate(), \textcolor{keyword}{false});}
\DoxyCodeLine{380                     out           = out-\/>left;}
\DoxyCodeLine{381                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{382                 \}}
\DoxyCodeLine{383                 parent   = leftNode;}
\DoxyCodeLine{384                 leftNode = leftNode-\/>right;}
\DoxyCodeLine{385             \}}
\DoxyCodeLine{386         \}}
\DoxyCodeLine{387     \}}
\DoxyCodeLine{388 }
\DoxyCodeLine{403     [[nodiscard]] std::shared\_ptr<MathNode> \mbox{\hyperlink{classEquation_a6c8ce3066345c865668b9133985db652}{simplifyOP}}(\textcolor{keyword}{const} std::shared\_ptr<MathNode>\& node)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{404         std::shared\_ptr<MathNode> nodeOut = node;}
\DoxyCodeLine{405         \textcolor{comment}{// node is function, simplify f(x) -\/> y}}
\DoxyCodeLine{406         \textcolor{keywordflow}{if}(nodeOut-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefea521488c28905dded8d5866bbb41852df}{NodeType\_Functional}} \&\& nodeOut-\/>left-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefead04e2797598b259ea0d4a18142932f96}{NodeType\_Numeric}}) \{}
\DoxyCodeLine{407             \textcolor{keywordflow}{return} std::make\_shared<Number>(std::to\_string(nodeOut-\/>Evaluate()));}
\DoxyCodeLine{408         \}}
\DoxyCodeLine{409 }
\DoxyCodeLine{410         \textcolor{comment}{// left is Operator, simplify left := f(x) -\/> y}}
\DoxyCodeLine{411         \textcolor{keywordflow}{if}(nodeOut-\/>left-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefea1c144f8bf59ab742c4408ec393602d02}{NodeType\_Operator}} || nodeOut-\/>left-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefea521488c28905dded8d5866bbb41852df}{NodeType\_Functional}}) \{}
\DoxyCodeLine{412             nodeOut-\/>left = \mbox{\hyperlink{classEquation_a276161ffaa1e7610cc0a849fa1704af3}{SimplifyTree}}(nodeOut-\/>left);}
\DoxyCodeLine{413         \}}
\DoxyCodeLine{414 }
\DoxyCodeLine{415         \textcolor{comment}{// All done}}
\DoxyCodeLine{416         \textcolor{keywordflow}{if}(nodeOut-\/>type != \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefea1c144f8bf59ab742c4408ec393602d02}{NodeType\_Operator}}) \textcolor{keywordflow}{return} nodeOut;}
\DoxyCodeLine{417 }
\DoxyCodeLine{418         \textcolor{comment}{// from now on right is required}}
\DoxyCodeLine{419         assert(nodeOut-\/>right != \textcolor{keyword}{nullptr});}
\DoxyCodeLine{420 }
\DoxyCodeLine{421         \textcolor{comment}{// left and right are both Number, evaluate op}}
\DoxyCodeLine{422         \textcolor{keywordflow}{if}(nodeOut-\/>left-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefead04e2797598b259ea0d4a18142932f96}{NodeType\_Numeric}} \&\& nodeOut-\/>right-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefead04e2797598b259ea0d4a18142932f96}{NodeType\_Numeric}}) \{}
\DoxyCodeLine{423             \textcolor{keywordflow}{return} std::make\_shared<Number>(std::to\_string(nodeOut-\/>Evaluate()));}
\DoxyCodeLine{424         \}}
\DoxyCodeLine{425 }
\DoxyCodeLine{426         \textcolor{comment}{// right is Operator, simplify right := f(x) -\/> y}}
\DoxyCodeLine{427         \textcolor{keywordflow}{if}(nodeOut-\/>right-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefea1c144f8bf59ab742c4408ec393602d02}{NodeType\_Operator}} || nodeOut-\/>right-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefea521488c28905dded8d5866bbb41852df}{NodeType\_Functional}}) \{}
\DoxyCodeLine{428             nodeOut-\/>right = \mbox{\hyperlink{classEquation_a276161ffaa1e7610cc0a849fa1704af3}{SimplifyTree}}(nodeOut-\/>right);}
\DoxyCodeLine{429         \}}
\DoxyCodeLine{430 }
\DoxyCodeLine{431         \textcolor{keywordflow}{return} nodeOut;}
\DoxyCodeLine{432     \}}
\DoxyCodeLine{433 }
\DoxyCodeLine{447     [[nodiscard]] std::shared\_ptr<MathNode> \mbox{\hyperlink{classEquation_ae78ab4977e573e352f444a52142d4800}{ApplyOperator}}(}
\DoxyCodeLine{448     \textcolor{keyword}{const} std::shared\_ptr<MathNode>\& node, \textcolor{keyword}{const} std::shared\_ptr<Operator>\& op, \textcolor{keyword}{const} \textcolor{keywordtype}{double}\& val, \textcolor{keywordtype}{bool} isLeft)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{449         \textcolor{keyword}{auto} out = node;}
\DoxyCodeLine{450         \textcolor{keywordflow}{switch}(out-\/>connectionType) \{}
\DoxyCodeLine{451             \textcolor{keywordflow}{case} \mbox{\hyperlink{MathNode_8h_ac3957c9768ee90555a77588a75a747aba7e556deecd3a56edd17baf888f865259}{ConnectionType\_Dual}}:}
\DoxyCodeLine{452                 \textcolor{keywordflow}{if}(isLeft) out-\/>left = \mbox{\hyperlink{classEquation_ae78ab4977e573e352f444a52142d4800}{ApplyOperator}}(out-\/>left, op, val, \textcolor{keyword}{true});}
\DoxyCodeLine{453                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{454                     out-\/>right = \mbox{\hyperlink{classEquation_ae78ab4977e573e352f444a52142d4800}{ApplyOperator}}(out-\/>right, op, val, \textcolor{keyword}{false});}
\DoxyCodeLine{455                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{456             \textcolor{keywordflow}{case} \mbox{\hyperlink{MathNode_8h_ac3957c9768ee90555a77588a75a747abae8682481e267e0dcf54a590bb9b93f46}{ConnectionType\_Left}}:}
\DoxyCodeLine{457                 \textcolor{keywordflow}{if}(isLeft) out-\/>left = \mbox{\hyperlink{classEquation_ae78ab4977e573e352f444a52142d4800}{ApplyOperator}}(out-\/>left, op, val, \textcolor{keyword}{true});}
\DoxyCodeLine{458                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{459             \textcolor{keywordflow}{case} \mbox{\hyperlink{MathNode_8h_ac3957c9768ee90555a77588a75a747aba39f57f9939ce7c3fe38fff24e2ac81d7}{ConnectionType\_Right}}:}
\DoxyCodeLine{460                 \textcolor{keywordflow}{if}(!isLeft) out-\/>right = \mbox{\hyperlink{classEquation_ae78ab4977e573e352f444a52142d4800}{ApplyOperator}}(out-\/>right, op, val, \textcolor{keyword}{false});}
\DoxyCodeLine{461                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{462             \textcolor{keywordflow}{case} \mbox{\hyperlink{MathNode_8h_ac3957c9768ee90555a77588a75a747aba9eeffc9e32035844d6c1ceb772b7a69c}{ConnectionType\_None}}:}
\DoxyCodeLine{463                 \{}
\DoxyCodeLine{464                     \textcolor{keywordflow}{if}(out-\/>type == \mbox{\hyperlink{MathNode_8h_af66185625ec6e66044e64693a29dfefead04e2797598b259ea0d4a18142932f96}{NodeType\_Numeric}}) \{}
\DoxyCodeLine{465                         \textcolor{keywordflow}{if}(isLeft) \textcolor{keywordflow}{return} std::make\_shared<Number>(std::to\_string(op-\/>op(out-\/>Evaluate(), val)));}
\DoxyCodeLine{466                         \textcolor{keywordflow}{else}}
\DoxyCodeLine{467                             \textcolor{keywordflow}{return} std::make\_shared<Number>(std::to\_string(op-\/>op(val, out-\/>Evaluate())));}
\DoxyCodeLine{468                     \}}
\DoxyCodeLine{469                 \}}
\DoxyCodeLine{470                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{471             \textcolor{keywordflow}{case} \mbox{\hyperlink{MathNode_8h_ac3957c9768ee90555a77588a75a747abaca47e3381d314ac9ecf94b7bf69f580f}{ConnectionType\_Unknown}}: \textcolor{keywordflow}{break};}
\DoxyCodeLine{472         \}}
\DoxyCodeLine{473         \textcolor{keywordflow}{return} out;}
\DoxyCodeLine{474     \}}
\DoxyCodeLine{475 \};}
\DoxyCodeLine{476 }

\end{DoxyCode}
